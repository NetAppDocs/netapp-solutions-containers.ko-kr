---
sidebar: sidebar 
permalink: openshift/os-on-openstack.html 
keywords: OpenShift, OpenStack, private cloud 
summary: Red Hat OpenStack Platform은 안전하고 안정적인 프라이빗 OpenStack 클라우드를 만들고, 배포하고, 확장할 수 있는 통합 기반을 제공합니다. 
---
= Red Hat OpenStack 플랫폼의 OpenShift
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Red Hat OpenStack Platform은 안전하고 안정적인 프라이빗 OpenStack 클라우드를 만들고, 배포하고, 확장할 수 있는 통합 기반을 제공합니다.

OSP는 컴퓨팅, 스토리지, 네트워킹 리소스를 관리하는 제어 서비스 모음으로 구현된 IaaS(Infrastructure-as-a-Service) 클라우드입니다.  환경은 관리자와 사용자가 OpenStack 리소스를 제어, 프로비저닝 및 자동화할 수 있는 웹 기반 인터페이스를 사용하여 관리됩니다.  또한, OpenStack 인프라는 광범위한 명령줄 인터페이스와 API를 통해 구축되어 관리자와 최종 사용자에게 완전한 자동화 기능을 제공합니다.

OpenStack 프로젝트는 6개월마다 업데이트된 릴리스를 제공하는 빠르게 개발되는 커뮤니티 프로젝트입니다.  초기에 Red Hat OpenStack Platform은 모든 업스트림 릴리스와 함께 새로운 릴리스를 게시하고 세 번째 릴리스마다 장기 지원을 제공함으로써 이 릴리스 주기를 따라잡았습니다.  최근 OSP 16.0 릴리스(OpenStack Train 기반)를 통해 Red Hat은 릴리스 번호 증가에 발맞추지 않고 대신 하위 릴리스에 새로운 기능을 백포트하기로 결정했습니다.  가장 최근에 출시된 버전은 Red Hat OpenStack Platform 16.1로, Ussuri 및 Victoria 릴리스 업스트림의 고급 기능이 백포트되어 포함되어 있습니다.

OSP에 대한 자세한 내용은 다음을 참조하세요.link:https://www.redhat.com/en/technologies/linux-platforms/openstack-platform["Red Hat OpenStack Platform 웹사이트"^] .



== 오픈스택 서비스

OpenStack Platform 서비스는 컨테이너로 배포되므로 서비스를 서로 분리하고 쉽게 업그레이드할 수 있습니다.  OpenStack 플랫폼은 Kolla로 구축되고 관리되는 컨테이너 세트를 사용합니다.  서비스 배포는 Red Hat Custom Portal에서 컨테이너 이미지를 가져와서 수행됩니다.  이러한 서비스 컨테이너는 Podman 명령을 사용하여 관리되며 Red Hat OpenStack Director를 통해 배포, 구성 및 유지 관리됩니다.

image:redhat-openshift-034.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

[cols="15%, 15%, 70%"]
|===
| 서비스 | 프로젝트 이름 | 설명 


| 계기반 | 수평선 | OpenStack 서비스를 관리하는 데 사용하는 웹 브라우저 기반 대시보드입니다. 


| 신원 | Keystone | OpenStack 서비스의 인증 및 권한 부여와 사용자, 프로젝트, 역할 관리를 위한 중앙 집중식 서비스입니다. 


| 오픈스택 네트워킹 | 중성자 | OpenStack 서비스 인터페이스 간 연결을 제공합니다. 


| 블록 스토리지 | 분석 | 가상 머신(VM)의 영구 블록 스토리지 볼륨을 관리합니다. 


| 컴퓨팅 | 신성 | 컴퓨팅 노드에서 실행되는 VM을 관리하고 프로비저닝합니다. 


| 영상 | 섬광 | VM 이미지, 볼륨 스냅샷 등의 리소스를 저장하는 데 사용되는 레지스트리 서비스입니다. 


| 객체 스토리지 | 스위프트 | 사용자가 파일과 임의의 데이터를 저장하고 검색할 수 있습니다. 


| 원격 측정 | 운고계 | 클라우드 리소스 사용에 대한 측정을 제공합니다. 


| 관현악법 | 열 | 리소스 스택의 자동 생성을 지원하는 템플릿 기반 오케스트레이션 엔진입니다. 
|===


== 네트워크 디자인

NetApp 솔루션이 포함된 Red Hat OpenShift는 두 개의 데이터 스위치를 사용하여 25Gbps의 기본 데이터 연결을 제공합니다.  또한 스토리지 노드의 대역 내 관리와 IPMI 기능의 대역 외 관리를 위해 1Gbps의 연결을 제공하는 두 개의 추가 관리 스위치를 사용합니다.

Red Hat OpenStack Director는 Ironic 베어 메탈 프로비저닝 서비스를 사용하여 Red Hat OpenStack Platform을 배포하는 데 IPMI 기능이 필요합니다.



=== VLAN 요구 사항

NetApp 탑재된 Red Hat OpenShift는 가상 LAN(VLAN)을 사용하여 다양한 목적에 맞는 네트워크 트래픽을 논리적으로 분리하도록 설계되었습니다.  이러한 구성은 고객 요구에 맞게 확장하거나 특정 네트워크 서비스에 대한 추가적인 격리를 제공하도록 확장할 수 있습니다.  다음 표는 NetApp 에서 솔루션을 검증하는 동안 솔루션을 구현하는 데 필요한 VLAN을 나열합니다.

[cols="15%, 70%, 15%"]
|===
| VLAN | 목적 | VLAN ID 


| 대역 외 관리 네트워크 | Ironic의 물리적 노드와 IPMI 서비스를 관리하는 데 사용되는 네트워크입니다. | 16 


| 스토리지 인프라 | Swift와 같은 인프라 서비스를 지원하기 위해 컨트롤러 노드가 볼륨을 직접 매핑하는 데 사용되는 네트워크입니다. | 201 


| 저장 신더 | 환경에 배포된 가상 인스턴스에 블록 볼륨을 직접 매핑하고 연결하는 데 사용되는 네트워크입니다. | 202 


| 내부 API | API 통신, RPC 메시지, 데이터베이스 통신을 사용하여 OpenStack 서비스 간 통신에 사용되는 네트워크입니다. | 301 


| 거주자 | Neutron은 VXLAN을 통한 터널링을 통해 각 테넌트에게 자체 네트워크를 제공합니다.  네트워크 트래픽은 각 테넌트 네트워크 내에서 격리됩니다.  각 테넌트 네트워크에는 연결된 IP 서브넷이 있으며, 네트워크 네임스페이스는 여러 테넌트 네트워크가 충돌을 일으키지 않고 동일한 주소 범위를 사용할 수 있음을 의미합니다. | 302 


| 스토리지 관리 | OpenStack Object Storage(Swift)는 이 네트워크를 사용하여 참여 복제 노드 간의 데이터 객체를 동기화합니다.  프록시 서비스는 사용자 요청과 기본 저장 계층 사이의 중개 인터페이스 역할을 합니다.  프록시는 들어오는 요청을 수신하고 요청된 데이터를 검색하는 데 필요한 복제본을 찾습니다. | 303 


| PXE | OpenStack Director는 OSP Overcloud 설치를 조율하기 위해 Ironic 베어 메탈 프로비저닝 서비스의 일부로 PXE 부팅을 제공합니다. | 3484 


| 외부 | 그래픽 관리를 위한 OpenStack 대시보드(Horizon)를 호스팅하고 공개 API 호출을 통해 OpenStack 서비스를 관리할 수 있는 공개적으로 사용 가능한 네트워크입니다. | 3485 


| 인밴드 관리 네트워크 | SSH 액세스, DNS 트래픽, NTP(네트워크 시간 프로토콜) 트래픽과 같은 시스템 관리 기능에 대한 액세스를 제공합니다.  이 네트워크는 컨트롤러가 아닌 노드에 대한 게이트웨이 역할도 합니다. | 3486 
|===


=== 네트워크 인프라 지원 리소스

OpenShift 컨테이너 플랫폼을 배포하기 전에 다음 인프라가 마련되어 있어야 합니다.

* 전체 호스트 이름 확인을 제공하는 하나 이상의 DNS 서버.
* 솔루션 내 서버의 시간을 동기화할 수 있는 NTP 서버가 최소 3개 있어야 합니다.
* (선택 사항) OpenShift 환경에 대한 아웃바운드 인터넷 연결.




== 프로덕션 배포를 위한 모범 사례

이 섹션에서는 조직이 이 솔루션을 프로덕션에 배포하기 전에 고려해야 할 몇 가지 모범 사례를 나열합니다.



=== 최소 3개의 컴퓨팅 노드가 있는 OSP 프라이빗 클라우드에 OpenShift를 배포합니다.

이 문서에 설명된 검증된 아키텍처는 3개의 OSP 컨트롤러 노드와 2개의 OSP 컴퓨트 노드를 배포하여 HA 작업에 적합한 최소 하드웨어 배포를 제시합니다.  이 아키텍처는 두 컴퓨팅 노드 모두 가상 인스턴스를 시작하고 배포된 VM이 두 하이퍼바이저 간에 마이그레이션할 수 있는 장애 허용 구성을 보장합니다.

Red Hat OpenShift는 처음에 3개의 마스터 노드로 배포되므로 2노드 구성에서는 최소 2개의 마스터가 동일한 노드를 차지하게 될 수 있으며, 특정 노드를 사용할 수 없게 되면 OpenShift가 중단될 수 있습니다.  따라서 OpenShift 마스터를 균등하게 분산하고 솔루션의 내결함성을 높이기 위해 최소 3개의 OSP 컴퓨트 노드를 배포하는 것이 Red Hat의 모범 사례입니다.



=== 가상 머신/호스트 친화성 구성

OpenShift 마스터를 여러 하이퍼바이저 노드에 분산하려면 VM/호스트 친화성을 활성화하면 됩니다.

친화성은 VM 및/또는 호스트 집합에 대한 규칙을 정의하는 방법으로, VM이 그룹 내의 동일한 호스트에서 함께 실행되는지 아니면 서로 다른 호스트에서 실행되는지 결정합니다.  동일한 매개변수와 조건 집합을 갖는 VM 및/또는 호스트로 구성된 친화성 그룹을 생성하여 VM에 적용됩니다.  친화성 그룹의 VM이 그룹 내의 동일한 호스트에서 실행되는지, 아니면 다른 호스트에서 별도로 실행되는지에 따라 친화성 그룹의 매개변수는 긍정적 친화성이나 부정적 친화성을 정의할 수 있습니다.  Red Hat OpenStack Platform에서는 서버 그룹을 생성하고 필터를 구성하여 호스트 친화성 및 반친화성 규칙을 만들고 적용할 수 있습니다. 이를 통해 Nova가 서버 그룹에 배포한 인스턴스가 다른 컴퓨팅 노드에 배포됩니다.

서버 그룹은 기본적으로 최대 10개의 가상 인스턴스를 배치를 관리할 수 있습니다.  이는 Nova의 기본 할당량을 업데이트하여 수정할 수 있습니다.


NOTE: OSP 서버 그룹에는 특정한 하드 친화성/반친화성 제한이 있습니다. 별도 노드에 배포할 리소스가 충분하지 않거나 노드 공유를 허용할 리소스가 충분하지 않으면 VM이 부팅되지 않습니다.

친화성 그룹을 구성하려면 다음을 참조하세요.link:https://access.redhat.com/solutions/1977943["OpenStack 인스턴스에 대해 Affinity와 Anti-Affinity를 어떻게 구성합니까?"^] .



=== OpenShift 배포를 위해 사용자 정의 설치 파일을 사용하세요

IPI는 이 문서의 앞부분에서 설명한 대화형 마법사를 통해 OpenShift 클러스터의 배포를 쉽게 만듭니다.  하지만 클러스터 배포의 일부로 일부 기본값을 변경해야 할 수도 있습니다.

이러한 경우, 클러스터를 즉시 배포하지 않고 마법사를 실행하여 작업을 지정할 수 있습니다. 대신 마법사는 나중에 클러스터를 배포할 수 있는 구성 파일을 생성합니다. 이는 IPI 기본 설정을 변경해야 하거나 멀티테넌시와 같은 다른 용도로 환경에 여러 개의 동일한 클러스터를 배포하려는 경우에 매우 유용합니다. OpenShift용 사용자 지정 설치 구성을 만드는 방법에 대한 자세한 내용은 다음을 참조하세요. link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.20/html/installing_on_openstack/installing-openstack-installer-custom["Red Hat OpenShift 사용자 정의를 사용하여 OpenStack에 클러스터 설치"^].
