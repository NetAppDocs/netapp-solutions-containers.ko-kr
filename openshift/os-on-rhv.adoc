---
sidebar: sidebar 
permalink: openshift/os-on-rhv.html 
keywords: Red Hat Virtualization, OpenShift, RHV 
summary: 'RHV는 Red Hat Enterprise Linux(RHEL)에서 실행되고 KVM 하이퍼바이저를 사용하는 엔터프라이즈 가상 데이터 센터 플랫폼입니다.' 
---
= Red Hat Virtualization의 OpenShift
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Red Hat Virtualization(RHV)은 Red Hat Enterprise Linux(RHEL)에서 실행되고 KVM 하이퍼바이저를 사용하는 엔터프라이즈 가상 데이터 센터 플랫폼입니다.

RHV에 대한 자세한 내용은 다음을 참조하세요.link:https://www.redhat.com/en/technologies/virtualization/enterprise-virtualization["Red Hat Virtualization 웹사이트"^] .

RHV는 다음과 같은 기능을 제공합니다.

* *VM 및 호스트의 중앙 집중식 관리* RHV 관리자는 배포 시 물리적 또는 가상 머신(VM)으로 실행되며 중앙 인터페이스에서 솔루션을 관리하기 위한 웹 기반 GUI를 제공합니다.
* *셀프 호스팅 엔진* 하드웨어 요구 사항을 최소화하기 위해 RHV는 RHV Manager(RHV-M)를 게스트 VM을 실행하는 동일한 호스트에 VM으로 배포할 수 있도록 허용합니다.
* *고가용성* 호스트 장애 발생 시 중단을 방지하기 위해 RHV에서는 VM을 고가용성으로 구성할 수 있습니다.  고가용성 VM은 복원력 정책을 사용하여 클러스터 수준에서 제어됩니다.
* *높은 확장성* 단일 RHV 클러스터는 최대 200개의 하이퍼바이저 호스트를 가질 수 있으므로 리소스를 많이 필요로 하는 엔터프라이즈급 워크로드를 호스팅하는 대규모 VM의 요구 사항을 지원할 수 있습니다.
* *강화된 보안* RHV에서 상속받은 보안 가상화(sVirt) 및 보안 강화 Linux(SELinux) 기술은 RHV에서 호스트와 VM의 보안을 강화하고 강화하기 위해 사용됩니다.  이러한 기능의 주요 장점은 VM과 관련 리소스를 논리적으로 분리한다는 것입니다.


image:redhat-openshift-003.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



== 네트워크 디자인

NetApp 솔루션의 Red Hat OpenShift는 두 개의 데이터 스위치를 사용하여 25Gbps의 기본 데이터 연결을 제공합니다.  또한 스토리지 노드의 대역 내 관리와 IPMI 기능의 대역 외 관리를 위해 1Gbps의 연결을 제공하는 두 개의 추가 관리 스위치를 사용합니다.  OCP는 클러스터 관리를 위해 RHV의 가상 머신 논리 네트워크를 사용합니다.  이 섹션에서는 솔루션에 사용된 각 가상 네트워크 세그먼트의 구성과 목적을 설명하고 솔루션을 배포하기 위한 전제 조건을 간략하게 설명합니다.



=== VLAN 요구 사항

RHV의 Red Hat OpenShift는 가상 LAN(VLAN)을 사용하여 다양한 목적에 맞는 네트워크 트래픽을 논리적으로 분리하도록 설계되었습니다.  이러한 구성은 고객 요구에 맞게 확장하거나 특정 네트워크 서비스에 대한 추가적인 격리를 제공하도록 확장할 수 있습니다.  다음 표는 NetApp 에서 솔루션을 검증하는 동안 솔루션을 구현하는 데 필요한 VLAN을 나열합니다.

[cols="40%, 40%, 20%"]
|===
| VLAN | 목적 | VLAN ID 


| 대역 외 관리 네트워크 | 물리적 노드 및 IPMI 관리 | 16 


| VM 네트워크 | 가상 게스트 네트워크 액세스 | 1172 


| 인밴드 관리 네트워크 | RHV-H 노드, RHV-Manager 및 ovirtmgmt 네트워크 관리 | 3343 


| 저장 네트워크 | NetApp Element iSCSI용 스토리지 네트워크 | 3344 


| 이주 네트워크 | 가상 게스트 마이그레이션을 위한 네트워크 | 3345 
|===


=== 네트워크 인프라 지원 리소스

OpenShift 컨테이너 플랫폼을 배포하기 전에 다음 인프라가 마련되어 있어야 합니다.

* 인밴드 관리 네트워크와 VM 네트워크에서 접근 가능한 전체 호스트 이름 확인을 제공하는 하나 이상의 DNS 서버.
* 인밴드 관리 네트워크와 VM 네트워크에서 접근할 수 있는 NTP 서버가 하나 이상 있어야 합니다.
* (선택 사항) 인밴드 관리 네트워크와 VM 네트워크 모두를 위한 아웃바운드 인터넷 연결.




== 프로덕션 배포를 위한 모범 사례

이 섹션에서는 조직이 이 솔루션을 프로덕션에 배포하기 전에 고려해야 할 몇 가지 모범 사례를 나열합니다.



=== 최소 3개 노드의 RHV 클러스터에 OpenShift 배포

이 문서에 설명된 검증된 아키텍처는 두 개의 RHV-H 하이퍼바이저 노드를 배포하고 두 호스트가 호스팅 엔진을 관리할 수 있고 배포된 VM이 두 하이퍼바이저 간에 마이그레이션할 수 있는 내결함성 구성을 보장함으로써 HA 작업에 적합한 최소 하드웨어 배포를 제시합니다.

Red Hat OpenShift는 처음에 3개의 마스터 노드로 배포되므로 2노드 구성에서는 최소 2개의 마스터가 동일한 노드를 차지하게 되며, 특정 노드를 사용할 수 없게 되면 OpenShift가 중단될 수 있습니다.  따라서 OpenShift 마스터를 균등하게 분산하고 솔루션의 내결함성을 높이기 위해 최소 3개의 RHV-H 하이퍼바이저 노드를 솔루션의 일부로 배포하는 것이 Red Hat의 모범 사례입니다.



=== 가상 머신/호스트 친화성 구성

VM/호스트 친화성을 활성화하면 OpenShift 마스터를 여러 하이퍼바이저 노드에 분산할 수 있습니다.

친화성은 VM 및/또는 호스트 집합에 대한 규칙을 정의하는 방법으로, VM이 그룹 내의 동일한 호스트에서 함께 실행되는지 아니면 서로 다른 호스트에서 실행되는지 결정합니다.  동일한 매개변수와 조건 집합을 갖는 VM 및/또는 호스트로 구성된 친화성 그룹을 생성하여 VM에 적용됩니다.  친화성 그룹의 VM이 그룹 내의 동일한 호스트에서 실행되는지, 아니면 다른 호스트에서 별도로 실행되는지에 따라 친화성 그룹의 매개변수는 긍정적 친화성이나 부정적 친화성을 정의할 수 있습니다.

매개변수에 대해 정의된 조건은 하드 적용 또는 소프트 적용이 될 수 있습니다.  엄격한 시행은 친화도 그룹 내의 VM이 외부 조건에 관계없이 항상 긍정적 또는 부정적 친화도를 엄격하게 따르도록 보장합니다.  소프트 시행은 가능할 때마다 친화성 그룹 내 VM이 긍정적 또는 부정적 친화성을 따르도록 더 높은 기본 설정을 보장합니다.  이 문서에 설명된 2개 또는 3개의 하이퍼바이저 구성에서는 소프트 친화성이 권장되는 설정입니다.  대규모 클러스터에서는 하드 친화성을 통해 OpenShift 노드를 올바르게 분산할 수 있습니다.

친화성 그룹을 구성하려면 다음을 참조하세요.link:https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.4/html/virtual_machine_management_guide/sect-affinity_groups["레드햇 6.11.  Affinity Groups 문서"^] .



=== OpenShift 배포를 위해 사용자 정의 설치 파일을 사용하세요

IPI는 이 문서의 앞부분에서 설명한 대화형 마법사를 통해 OpenShift 클러스터의 배포를 쉽게 만듭니다.  그러나 클러스터 배포의 일부로 변경해야 할 기본값이 있을 수 있습니다.

이런 경우, 클러스터를 즉시 배포하지 않고도 마법사를 실행하고 작업을 수행할 수 있습니다.  대신, 나중에 클러스터를 배포할 수 있는 구성 파일이 생성됩니다.  이 기능은 IPI 기본값을 변경하거나 다중 테넌시와 같은 다른 용도로 환경에 여러 개의 동일한 클러스터를 배포하려는 경우에 매우 유용합니다.  OpenShift에 대한 사용자 정의 설치 구성을 만드는 방법에 대한 자세한 내용은 다음을 참조하세요.link:https://docs.openshift.com/container-platform/4.4/installing/installing_rhv/installing-rhv-customizations.html["Red Hat OpenShift 사용자 지정을 사용하여 RHV에 클러스터 설치"^] .
