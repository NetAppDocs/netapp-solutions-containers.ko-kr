---
sidebar: sidebar 
permalink: anthos/anthos-vmw.html 
keywords: Anthos, VMware vSphere, ESXi, on_prem 
summary: VMware vSphere는 ESXi 하이퍼바이저에서 실행되는 수많은 가상화된 서버와 네트워크를 중앙에서 관리하기 위한 가상화 플랫폼입니다. 
---
= VMware의 Anthos 클러스터
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
VMware의 Anthos 클러스터는 최종 사용자의 개인 데이터 센터에 배포되는 Google Kubernetes Engine의 확장 프로그램입니다.  조직은 Google Cloud의 컨테이너에서 실행되도록 설계된 동일한 애플리케이션을 온프레미스의 Kubernetes 클러스터에 배포할 수 있습니다.  VMware의 Anthos 클러스터는 데이터 센터의 기존 VMware vSphere 환경에 배포할 수 있으므로 자본 비용을 절감하고 보다 빠른 배포 및 확장 작업이 가능합니다.

VMware에 Anthos 클러스터를 배포하는 데는 다음 구성 요소가 포함됩니다.

* *Anthos 관리자 워크스테이션.*  배포 호스트 `gkectl` 그리고 `kubectl` 명령을 실행하여 Anthos 배포를 배포하고 상호 작용할 수 있습니다.
* *관리자 클러스터.*  VMware에서 Anthos 클러스터를 설정할 때 배포된 초기 클러스터입니다.  이 클러스터는 배포, 확장, 업그레이드를 포함한 모든 하위 사용자 클러스터 작업을 관리합니다.
* *사용자 클러스터.*  각 사용자 클러스터는 자체 로드 밸런서 인스턴스 또는 파티션과 함께 배포되므로 개별 사용자나 그룹을 위한 독립형 Kubernetes 클러스터 역할을 할 수 있어 완전한 멀티테넌시를 달성하는 데 도움이 됩니다.


다음 그래픽은 Anthos-clusters-on-VMware 배포에 대한 설명입니다.

image:a-w-n-anthos-controlplanev2-vm-architecture.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



== 이익

VMware의 Anthos 클러스터는 다음과 같은 이점을 제공합니다.

* *고급 멀티테넌시.*  각 최종 사용자에게는 자체 개발 환경에 필요한 가상 리소스가 배포된 자체 사용자 클러스터가 할당될 수 있습니다.
* *비용 절감.*  최종 사용자는 Google Cloud 환경이나 대규모 베어 메탈 클러스터에서 리소스를 프로비저닝하는 대신, 동일한 물리적 환경에 여러 사용자 클러스터를 배포하고 자체 물리적 리소스를 애플리케이션 배포에 활용함으로써 상당한 비용 절감 효과를 얻을 수 있습니다.
* *개발 후 출판.*  온프레미스 배포는 애플리케이션이 개발되는 동안 사용할 수 있으므로, 클라우드에서 공개적으로 사용하기 전에 로컬 데이터 센터의 개인 정보 보호 환경에서 애플리케이션을 테스트할 수 있습니다.
* *보안 요구 사항.*  보안에 대한 우려가 높아지거나 퍼블릭 클라우드에 저장할 수 없는 중요한 데이터 세트가 있는 고객은 자체 데이터 센터의 보안을 유지하며 애플리케이션을 실행하여 조직의 요구 사항을 충족할 수 있습니다.




== VMware vSphere

VMware vSphere는 ESXi 하이퍼바이저에서 실행되는 수많은 가상화된 서버와 네트워크를 중앙에서 관리하기 위한 가상화 플랫폼입니다.

VMware vSphere에 대한 자세한 내용은 다음을 참조하세요. https://www.vmware.com/products/vsphere.html["VMware vSphere 웹사이트"^] .

VMware vSphere는 다음과 같은 기능을 제공합니다.

* *VMware vCenter 서버.*  VMware vCenter Server는 단일 콘솔에서 모든 호스트와 VM을 통합적으로 관리하고 클러스터, 호스트 및 VM의 성능 모니터링을 집계합니다.
* *VMware vSphere vMotion.*  VMware vCenter를 사용하면 중단 없이 요청 시 클러스터의 노드 간에 VM을 핫 마이그레이션할 수 있습니다.
* *vSphere 고가용성.*  호스트 장애 발생 시 중단을 방지하기 위해 VMware vSphere에서는 호스트를 클러스터링하고 고가용성을 위해 구성할 수 있습니다.  호스트 장애로 인해 중단된 VM은 클러스터의 다른 호스트에서 잠시 재부팅되어 서비스를 복구합니다.
* *분산 리소스 스케줄러(DRS).*  VMware vSphere 클러스터는 호스팅하는 VM의 리소스 요구 사항을 부하 분산하도록 구성할 수 있습니다.  리소스 경합이 발생하는 VM은 클러스터의 다른 노드로 핫 마이그레이션하여 충분한 리소스를 사용할 수 있는지 확인할 수 있습니다.




== 하드웨어 요구 사항



=== 컴퓨팅

Google Cloud는 Anthos Ready 플랫폼 파트너 프로그램을 통해 Anthos의 새로운 릴리스에 대한 파트너 서버 플랫폼의 업데이트된 유효성 검사를 주기적으로 요청합니다.  현재 검증된 서버 플랫폼과 지원되는 Anthos 버전 목록을 찾을 수 있습니다. https://cloud.google.com/anthos/docs/resources/partner-platforms["여기"^] .



=== 운영 체제

VMware의 Anthos 클러스터는 고객이 선택한 vSphere 7 및 8 환경 모두에 배포할 수 있으므로 현재 데이터 센터 인프라와 일치하도록 지원할 수 있습니다.

다음 표에는 NetApp 과 파트너사가 솔루션을 검증하는 데 사용한 vSphere 버전 목록이 포함되어 있습니다.

|===
| 운영 체제 | 풀어 주다 | Anthos 버전 


| VCenter | 8.0.1 | 1.28 
|===


=== 추가 하드웨어

NetApp 과 Anthos를 완벽하게 검증된 솔루션으로 배포하기 위해 NetApp 과 파트너 엔지니어가 네트워킹 및 스토리지를 위한 추가 데이터 센터 구성 요소를 테스트했습니다.

다음 표에는 이러한 추가 인프라 구성 요소에 대한 정보가 포함되어 있습니다.

|===
| 제조업체 | 하드웨어 구성 요소 


| 멜라녹스 | 스위치(데이터 네트워크) 


| Cisco | 스위치(관리 네트워크) 


| NetApp | AFF 저장 시스템 
|===


=== 추가 소프트웨어

다음 표에는 검증 환경에 배포된 소프트웨어 버전 목록이 포함되어 있습니다.

|===
| 제조업체 | 소프트웨어 이름 | 버전 


| NetApp | ONTAP | 9.12.1 


| NetApp | Trident | 24.02.0 
|===
NetApp 에서 수행한 Anthos Ready 플랫폼 검증 과정에서 다음 다이어그램을 기반으로 랩 환경을 구축했으며, 이를 통해 다양한 NetApp ONTAP 스토리지 백엔드를 사용하여 여러 시나리오를 테스트할 수 있었습니다.

image:a-w-n-anthos-128-vsphere8-validation.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



=== 네트워크 인프라 지원 리소스

Anthos를 배포하기 전에 다음 인프라가 마련되어 있어야 합니다.

* 인밴드 관리 네트워크와 VM 네트워크에서 접근 가능한 전체 호스트 이름 확인을 제공하는 하나 이상의 DNS 서버.
* 인밴드 관리 네트워크와 VM 네트워크에서 접근할 수 있는 NTP 서버가 하나 이상 있어야 합니다.
* 클러스터가 동적으로 확장되어야 하는 경우 필요에 따라 네트워크 주소 임대를 제공하는 DHCP 서버가 있습니다.
* (선택 사항) 인밴드 관리 네트워크와 VM 네트워크 모두를 위한 아웃바운드 인터넷 연결.




== 프로덕션 배포를 위한 모범 사례

이 섹션에서는 조직이 이 솔루션을 프로덕션에 배포하기 전에 고려해야 할 몇 가지 모범 사례를 나열합니다.



=== 최소 3개 노드의 ESXi 클러스터에 Anthos 배포

데모 또는 평가 목적으로 3개 노드 미만의 vSphere 클러스터에 Anthos를 설치하는 것은 가능하지만, 프로덕션 워크로드에는 권장되지 않습니다.  두 개의 노드가 기본 HA 및 장애 허용을 허용하지만, 기본 호스트 친화성을 비활성화하려면 Anthos 클러스터 구성을 수정해야 하며, 이 배포 방법은 Google Cloud에서 지원되지 않습니다.



=== 가상 머신 및 호스트 친화성 구성

VM 및 호스트 친화성을 활성화하면 Anthos 클러스터 노드를 여러 하이퍼바이저 노드에 분산할 수 있습니다.

친화성 또는 반친화성은 VM 및/또는 호스트 집합에 대한 규칙을 정의하는 방법으로, VM이 그룹 내의 동일한 호스트 또는 호스트에서 함께 실행되는지 아니면 서로 다른 호스트에서 실행되는지 결정합니다.  동일한 매개변수와 조건 집합을 갖는 VM 및/또는 호스트로 구성된 친화성 그룹을 생성하여 VM에 적용됩니다.  친화성 그룹의 VM이 그룹 내의 동일한 호스트에서 실행되는지, 아니면 다른 호스트에서 별도로 실행되는지에 따라 친화성 그룹의 매개변수는 긍정적 친화성이나 부정적 친화성을 정의할 수 있습니다.

선호도 그룹을 구성하려면 사용 중인 VMware vSphere 버전에 맞는 아래 링크를 참조하십시오.

https://techdocs.broadcom.com/us/en/vmware-cis/vsphere/vsphere/9-0/vsphere-resource-management/using-drs-clusters-to-manage-resources/using-vm-host-affinity-rules.html["vSphere 9.0 설명서: DRS 선호도 규칙 사용"^]. https://techdocs.broadcom.com/us/en/vmware-cis/vsphere/vsphere/7-0/vsphere-resource-management/using-drs-clusters-to-manage-resources/using-vm-host-affinity-rules.html["vSphere 7.0 설명서: DRS 선호도 규칙 사용"^].


NOTE: Anthos에는 각 개별 구성 옵션이 있습니다. `cluster.yaml` ESXi 호스트의 환경 내 수에 따라 활성화하거나 비활성화할 수 있는 노드 선호도 규칙을 자동으로 생성하는 파일입니다.
